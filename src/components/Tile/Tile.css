/* ñapa temporal para ocultar casillas no ocupables */
.tile:nth-child(1) {visibility: hidden;}
.tile:nth-child(2) {visibility: hidden;}
.tile:nth-child(3) {visibility: hidden;}
.tile:nth-child(4) {visibility: hidden;}
.tile:nth-child(17) {visibility: hidden;}
.tile:nth-child(18) {visibility: hidden;}
.tile:nth-child(19) {visibility: hidden;}
.tile:nth-child(20) {visibility: hidden;}
.tile:nth-child(33) {visibility: hidden;}
.tile:nth-child(34) {visibility: hidden;}
.tile:nth-child(35) {visibility: hidden;}
.tile:nth-child(36) {visibility: hidden;}
.tile:nth-child(49) {visibility: hidden;}
.tile:nth-child(50) {visibility: hidden;}
.tile:nth-child(51) {visibility: hidden;}
.tile:nth-child(52) {visibility: hidden;}

.tile:nth-child(13) {visibility: hidden;}
.tile:nth-child(14) {visibility: hidden;}
.tile:nth-child(15) {visibility: hidden;}
.tile:nth-child(16) {visibility: hidden;}
.tile:nth-child(29) {visibility: hidden;}
.tile:nth-child(30) {visibility: hidden;}
.tile:nth-child(31) {visibility: hidden;}
.tile:nth-child(32) {visibility: hidden;}
.tile:nth-child(45) {visibility: hidden;}
.tile:nth-child(46) {visibility: hidden;}
.tile:nth-child(47) {visibility: hidden;}
.tile:nth-child(48) {visibility: hidden;}
.tile:nth-child(61) {visibility: hidden;}
.tile:nth-child(62) {visibility: hidden;}
.tile:nth-child(63) {visibility: hidden;}
.tile:nth-child(64) {visibility: hidden;}

.tile:nth-child(193) {visibility: hidden;}
.tile:nth-child(194) {visibility: hidden;}
.tile:nth-child(195) {visibility: hidden;}
.tile:nth-child(196) {visibility: hidden;}
.tile:nth-child(209) {visibility: hidden;}
.tile:nth-child(210) {visibility: hidden;}
.tile:nth-child(211) {visibility: hidden;}
.tile:nth-child(212) {visibility: hidden;}
.tile:nth-child(225) {visibility: hidden;}
.tile:nth-child(226) {visibility: hidden;}
.tile:nth-child(227) {visibility: hidden;}
.tile:nth-child(228) {visibility: hidden;}
.tile:nth-child(241) {visibility: hidden;}
.tile:nth-child(242) {visibility: hidden;}
.tile:nth-child(243) {visibility: hidden;}
.tile:nth-child(244) {visibility: hidden;}

.tile:nth-child(205) {visibility: hidden;}
.tile:nth-child(206) {visibility: hidden;}
.tile:nth-child(207) {visibility: hidden;}
.tile:nth-child(208) {visibility: hidden;}
.tile:nth-child(221) {visibility: hidden;}
.tile:nth-child(222) {visibility: hidden;}
.tile:nth-child(223) {visibility: hidden;}
.tile:nth-child(224) {visibility: hidden;}
.tile:nth-child(237) {visibility: hidden;}
.tile:nth-child(238) {visibility: hidden;}
.tile:nth-child(239) {visibility: hidden;}
.tile:nth-child(240) {visibility: hidden;}
.tile:nth-child(253) {visibility: hidden;}
.tile:nth-child(254) {visibility: hidden;}
.tile:nth-child(255) {visibility: hidden;}
.tile:nth-child(256) {visibility: hidden;}

.tile {
  width: 50px;
  height: 50px;
  border-radius: 10%;
  display: grid; /* modo grid */
  place-content: center; /* centrar la pieza en el tile*/
  border-bottom: 4px solid hsl(159, 12%, 27%);
  box-shadow: 0 4px 10px 3px hsl(160, 10%, 11%), inset 0 0 20px 0px hsl(86, 22%, 39%), 0 0 20px 0px hsl(155, 84%, 83%, 0%);;
  transition: 1s ease-in-out;
  position: relative; /* For ::before and ::after indicators */
}

.tile:hover {
  transition: 0.1s ease-in-out;
  box-shadow: 0 4px 10px 3px hsl(160, 10%, 11%, 0%), inset 0 0 10px 0px rgb(174, 212, 129), 0 0 25px 0px rgb(222, 255, 131);
}

/* BEM modifiers for colors */
.tile--dark {
  background-color: rgb(60, 87, 71);
}
.tile--dark:hover {
  background-color: rgb(86, 117, 77);
}

.tile--light {
  background-color: rgb(226, 255, 198);
}

/* Legacy support - keep old classes for now */
.black-tile {
  background-color: rgb(60, 87, 71);
}
.black-tile:hover {
  background-color: rgb(86, 117, 77);
}

.white-tile {
  background-color: rgb(226, 255, 198);
}

.tile .mess-piece {
  height: 50px; /* tamaño pieza */
  width: 50px;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: 42px;
  padding: 1px;
  opacity: 0.9;
  position: relative;
  border-radius: 50%;
  /* Default border for all pieces */
  border: 3px solid transparent;
  box-sizing: border-box;
  /* transition: 0.3s ease-in-out; */
}

/* Team color borders - Strong visual identification for multiplayer */
.mess-piece[data-piece-team="OUR"] {
  border-color: rgb(16, 185, 129) !important;
  box-shadow: 
    0 0 0 2px rgba(16, 185, 129, 0.4),
    0 0 15px 3px rgba(16, 185, 129, 0.5),
    inset 0 0 25px 3px rgba(16, 185, 129, 0.15);
}

.mess-piece[data-piece-team="OPPONENT"] {
  border-color: rgb(239, 68, 68) !important;
  box-shadow: 
    0 0 0 2px rgba(239, 68, 68, 0.4),
    0 0 15px 3px rgba(239, 68, 68, 0.5),
    inset 0 0 25px 3px rgba(239, 68, 68, 0.15);
}

.mess-piece[data-piece-team="OPPONENT_2"] {
  border-color: rgb(245, 158, 11) !important;
  box-shadow: 
    0 0 0 2px rgba(245, 158, 11, 0.4),
    0 0 15px 3px rgba(245, 158, 11, 0.5),
    inset 0 0 25px 3px rgba(245, 158, 11, 0.15);
}

.mess-piece[data-piece-team="OPPONENT_3"] {
  border-color: rgb(139, 92, 246) !important;
  box-shadow: 
    0 0 0 2px rgba(139, 92, 246, 0.4),
    0 0 15px 3px rgba(139, 92, 246, 0.5),
    inset 0 0 25px 3px rgba(139, 92, 246, 0.15);
}

/* Enhance team colors when piece is selected */
.mess-piece--selected[data-piece-team="OUR"] {
  border-color: rgb(16, 185, 129) !important;
  box-shadow: 
    0 0 0 3px rgba(16, 185, 129, 0.8),
    0 0 25px 5px rgba(16, 185, 129, 0.7),
    inset 0 0 35px 5px rgba(16, 185, 129, 0.25);
  animation: team-glow-green 1.5s ease-in-out infinite;
}

.mess-piece--selected[data-piece-team="OPPONENT"] {
  border-color: rgb(239, 68, 68) !important;
  box-shadow: 
    0 0 0 3px rgba(239, 68, 68, 0.8),
    0 0 25px 5px rgba(239, 68, 68, 0.7),
    inset 0 0 35px 5px rgba(239, 68, 68, 0.25);
  animation: team-glow-red 1.5s ease-in-out infinite;
}

.mess-piece--selected[data-piece-team="OPPONENT_2"] {
  border-color: rgb(245, 158, 11) !important;
  box-shadow: 
    0 0 0 3px rgba(245, 158, 11, 0.8),
    0 0 25px 5px rgba(245, 158, 11, 0.7),
    inset 0 0 35px 5px rgba(245, 158, 11, 0.25);
  animation: team-glow-orange 1.5s ease-in-out infinite;
}

.mess-piece--selected[data-piece-team="OPPONENT_3"] {
  border-color: rgb(139, 92, 246) !important;
  box-shadow: 
    0 0 0 3px rgba(139, 92, 246, 0.8),
    0 0 25px 5px rgba(139, 92, 246, 0.7),
    inset 0 0 35px 5px rgba(139, 92, 246, 0.25);
  animation: team-glow-purple 1.5s ease-in-out infinite;
}

@keyframes team-glow-green {
  0%, 100% {
    filter: brightness(1) drop-shadow(0 0 10px rgba(16, 185, 129, 0.6));
  }
  50% {
    filter: brightness(1.3) drop-shadow(0 0 20px rgba(16, 185, 129, 0.9));
  }
}

@keyframes team-glow-red {
  0%, 100% {
    filter: brightness(1) drop-shadow(0 0 10px rgba(239, 68, 68, 0.6));
  }
  50% {
    filter: brightness(1.3) drop-shadow(0 0 20px rgba(239, 68, 68, 0.9));
  }
}

@keyframes team-glow-orange {
  0%, 100% {
    filter: brightness(1) drop-shadow(0 0 10px rgba(245, 158, 11, 0.6));
  }
  50% {
    filter: brightness(1.3) drop-shadow(0 0 20px rgba(245, 158, 11, 0.9));
  }
}

@keyframes team-glow-purple {
  0%, 100% {
    filter: brightness(1) drop-shadow(0 0 10px rgba(139, 92, 246, 0.6));
  }
  50% {
    filter: brightness(1.3) drop-shadow(0 0 20px rgba(139, 92, 246, 0.9));
  }
}

.tile .mess-piece:hover {
  cursor: grab;
}

.tile .mess-piece:active {
  cursor: grabbing;
  opacity: 0.4;  
}

/* Piece being dragged (with position: absolute) */
.mess-piece[style*="position: absolute"] {
  z-index: 1000;
  opacity: 0.9;
  cursor: grabbing;
  pointer-events: none; /* Allow mouse events to pass through to tiles below */
}

/* TEMPLAR COUNTER-ATTACK INDICATOR */
/* TODO: Implement counter-attack detection system (see AdvancedRefactorPlan.prompt.md §1.5)
 * Rule: "si es atacado puede atacar primero y mueren ambas fichas"
 * Currently NOT implemented - removed visual indicator to avoid confusion
 * 
 * To implement:
 * 1. Detect when opponent targets a TEMPLAR
 * 2. Add .templar--under-attack class conditionally
 * 3. Uncomment CSS below and change selector to .templar--under-attack
 */

/* 
.mess-piece[data-piece-type="TEMPLAR"].templar--under-attack {
  position: relative;
  animation: templar-pulse 2s ease-in-out infinite;
}

.mess-piece[data-piece-type="TEMPLAR"].templar--under-attack::after {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  border: 2px solid rgba(220, 53, 69, 0.6);
  border-radius: 50%;
  pointer-events: none;
  animation: templar-glow 2s ease-in-out infinite;
}

@keyframes templar-pulse {
  0%, 100% {
    filter: drop-shadow(0 0 3px rgba(220, 53, 69, 0.4));
  }
  50% {
    filter: drop-shadow(0 0 8px rgba(220, 53, 69, 0.8));
  }
}

@keyframes templar-glow {
  0%, 100% {
    opacity: 0.3;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.1);
  }
}
*/