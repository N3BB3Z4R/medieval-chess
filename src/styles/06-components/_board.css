/**
 * ITCSS Layer 6: COMPONENTS - Board
 * Board-specific component styles with modern CSS nesting
 * Includes move indicators and interactive states
 */

@layer components {
  /* ============================================
     BOARD CONTAINER
     ============================================ */
  .messboard {
    display: grid;
    grid-template-columns: repeat(var(--board-size), var(--tile-size));
    grid-template-rows: repeat(var(--board-size), var(--tile-size));
    width: var(--board-total-size);
    height: var(--board-total-size);
    position: relative;
    z-index: var(--z-index-board);
    
    /* Make board focusable for keyboard navigation */
    &:focus {
      outline: 2px solid var(--color-selected);
      outline-offset: 4px;
    }
  }

  /* ============================================
     BOARD DECORATION
     ============================================ */
  .board-decoration {
    border-radius: var(--border-radius-board);
    padding: 6px;
    border: 4px solid var(--color-board-border-light);
    border-right: 4px solid var(--color-board-border-dark);
    border-bottom: 9px solid var(--color-board-border-dark);
    box-shadow: 
      inset 0 3px 6px 8px var(--color-board-shadow), 
      0 0 45px 10px var(--color-board-shadow);
    background: 
      radial-gradient(ellipse at top, #b6c295, transparent),
      radial-gradient(ellipse at bottom, #5a592a, transparent);
    
    /* Nested piece images in decoration */
    & img {
      width: var(--tile-size);
      height: var(--tile-size);
      object-fit: cover;
      border-radius: var(--border-radius-piece);
      float: left;
      margin-right: var(--spacing-sm);
    }
  }

  /* ============================================
     TILE BASE STYLES
     ============================================ */
  .tile {
    width: var(--tile-size);
    height: var(--tile-size);
    border-radius: var(--border-radius-tile);
    display: grid;
    place-content: center;
    border-bottom: 4px solid var(--color-tile-border);
    box-shadow: 
      0 4px 10px 3px var(--color-tile-shadow-dark), 
      inset 0 0 20px 0 var(--color-tile-glow);
    transition: all var(--transition-slow);
    position: relative;
    z-index: var(--z-index-tile);
    
    /* Hover state */
    &:hover {
      transition: all var(--transition-fast);
      box-shadow: 
        0 4px 10px 3px transparent, 
        inset 0 0 10px 0 var(--color-tile-glow-hover), 
        0 0 25px 0 var(--color-tile-glow-hover);
    }
    
    /* Dark tile variant */
    &.tile--dark {
      background-color: var(--color-tile-dark);
      
      &:hover {
        background-color: var(--color-tile-dark-hover);
      }
    }
    
    /* Light tile variant */
    &.tile--light {
      background-color: var(--color-tile-light);
      
      &:hover {
        background-color: var(--color-tile-light-hover);
      }
    }
    
    /* Forbidden/Hidden tiles */
    &.tile--forbidden {
      visibility: hidden;
      pointer-events: none;
    }
  }

  /* ============================================
     PIECE STYLES
     ============================================ */
  .mess-piece {
    height: var(--tile-size);
    width: var(--tile-size);
    background-repeat: no-repeat;
    background-position: center;
    background-size: var(--piece-size);
    padding: 1px;
    opacity: var(--opacity-piece-normal);
    transition: opacity var(--transition-normal);
    z-index: var(--z-index-piece);
    
    /* Hover state */
    &:hover {
      cursor: grab;
      opacity: var(--opacity-piece-hover);
    }
    
    /* Active/Dragging state */
    &:active {
      cursor: grabbing;
      opacity: var(--opacity-piece-dragging);
      z-index: var(--z-index-dragging);
    }
    
    /* Selected piece state */
    &.mess-piece--selected {
      filter: drop-shadow(0 0 10px var(--color-selected-glow));
      animation: pulse 1s ease-in-out infinite;
    }
  }
}
